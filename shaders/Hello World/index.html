<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello World</title>
</head>
<body>
    
    <canvas id="canvas" width="100" height="100"></canvas>

    <script src="../../webgl/common/gl-renderer.js"></script>
    <script>
        const vertex = `
            attribute vec2 a_vertexPosition;

            void main() {
                gl_PointSize = 1.0;
                gl_Position = vec4(a_vertexPosition, 1, 1);
            }
        `
        const fragment = `
            #ifdef GL_ES
            precision mediump float; // 设定所有的浮点值的精度
            #endif

            uniform float u_time;

            void main() {
                // 最终的像素颜色取决于预设的全局变量 gl_FragColor
                gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);
            }
        `

        // 第一步: 创建 Renderer 对象
        const canvas = document.querySelector('canvas');
        const renderer = new GlRenderer(canvas);

        // 第二步: 创建并启用 WebGL 程序
        const program = renderer.compileSync(fragment, vertex);
        renderer.useProgram(program);

        // 第三步：设置 uniform 变量

        
        // 第四步：将顶点数据送入缓冲区
        renderer.setMeshData([{
            positions: [
                [-1, -1],
                [-1, 1],
                [1, 1],
                [1, -1],
            ],
            attributes: {
                u_time: 1.0
            },
            // 顶点索引
            cells: [[0, 1, 2], [2, 0, 3]],
        }]);

        renderer.render();
    </script>

</body>
</html>